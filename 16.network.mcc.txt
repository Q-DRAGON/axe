1，总时间3小时

2，进度：《TCP/IP详解卷2——实现》第二十四章至第二十七章

3，学习的内容有:
**CH24 TCP：传输控制协议
1）TCP为每条连接建立自己的控制块，保存该连接的所有变量和状态信息。
2）TCP的状态变迁图：TCP在哪些条件下从一个状态变迁到另一个状态，每次变迁过程中发送和接收了哪些报文段。状态变迁图还显示了连接建立和终止的过程。
3）tcp_init，完成对InternetPCB的TCP链表的初始化。

**CH25 TCP的定时器
1）TCP为每条连接建立了七个定时器。
2）重传定时器取值的标准计算方法：TCP为每条连接维护两个RTT估计器:已平滑的RTT估计器(srtt)和已平滑的RTT平均偏差估计器(rttvar)。

**CH26 TCP输出
1）生成大多数TCP报文段的通用函数tcp_output。
2）生成RST报文段和保活探测的函数tcp_respond。
3）tcp_output一次只生成一个报文段，但它在结尾处会测试是否还有剩余数据等待发送，如果有，控制将折回，并试图发送下一个报文段。
4）因为窗口大小和时间戳是新增的选项，如果主动打开的一端希望使用这些选项，则必须在自己发送的SYN中添加它们，并且只有在对端发回的SYN也包含了同样的选项时才能使用。

**CH27 TCP的函数
1）tcp_drain是协议的资源耗尽处理函数，当内核的mbuf用完时被调用。实际上，不做任何处理。
2）tcp_drop发送RST来丢弃连接。
3）tcp_close执行正常的TCP连接关闭操作:发送FIN，并等待协议要求的4次报文交换以终止连接。卷1的18.2节讨论了连接关闭时双方需要交换的4个报文。
4）tcp_mss处理收到的MSS选项，并在TCP发送自己的MSS选项时计算应填入的MSS值。
5）tcp_ctlinput在收到对应于某个TCP报文段的ICMP差错时被调用，它接着调用tcp_notify处理ICMP差错。tcp_quench专门负责处理ICMP的源站抑制差错。
6）TCP_REASS宏和tcp_reass函数管理连接重组队列中的报文段。重组队列处理收到的乱序报文段，某些报文段还可能互相重复。
7）tcp_trace向内核的TCP调试循环缓存中添加记录(插口选项SO_DEBUG)。运行trpt(8)程序可以打印缓存内容。

4，掌握程度：
对以上内容达到初步了解的程度。
